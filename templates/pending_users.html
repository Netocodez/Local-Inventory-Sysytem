{% extends 'base.html' %}
{% block content %}
<style>
  h2 {
    text-align: center;
    color: #333;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: white;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  th, td {
    padding: 12px 15px;
    border-bottom: 1px solid #ddd;
    text-align: left;
  }
  th {
    background-color: #4CAF50;
    color: white;
  }
  tr:hover {
    background-color: #f1f1f1;
  }
  button.approve-btn {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
  }
  button.approve-btn:hover {
    background-color: #45a049;
  }
  .message.success {
    color: green;
    text-align: center;
    margin-bottom: 20px;
  }
  .message.error {
    color: red;
    text-align: center;
    margin-bottom: 20px;
  }
</style>

<h2>Pending User Approvals</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="message {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

{% if users %}
  <!--<table class="table table-bordered table-hover table-striped table-responsive" id="sales-table">-->
<div class="table-responsive">
    <table id="sales-table" class="table table-bordered table-striped nowrap" style="width:100%">
    <thead class="table-success">
      <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>Approve</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
        <tr>
          <td>{{ user.username }}</td>
          <td>{{ user.email or 'N/A' }}</td>
          <td>{{ user.role }}</td>
          <td>
            <form method="POST" action="{{ url_for('admin.approve_user', user_id=user.id) }}">
              <button type="submit" class="approve-btn">Approve</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
  <p style="text-align:center;">No users pending approval.</p>
{% endif %}
{% endblock %}
